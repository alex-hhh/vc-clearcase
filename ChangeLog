2004-09-29  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el (ah-cleartool-wait-for): 1.19 comment update.
	(ah-clearcase-vprop-prepare): 1.19 use the extended semantics of
	ah-clearcase-vprop-get
	(ah-clearcase-finish-checkout): 1.19 use a format string for the
	checkout command, plus increase the cleartool timeout by 50% when
	running it.
	(vc-clearcase-create-snapshot): 1.19 change to the snapshot
	directory before running the command to avoid a complaint from
	cleartool that the pathname is not within a VOB.

2004-09-21  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el (ah-clearcase-label-diff-report): 1.18 variables
	from the ps-print package are declared special, to avoid a
	compiler warning.  Also set them using set on the result of
	make-local-variable (code is more compact this way).

2004-09-20  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el (ah-cleartool-status-rx): 1.17 don't match the
	end of line $ as we might have two answers in the buffer and it
	will match the later.
	(ah-cleartool-wait-for): 1.17 re-written to use a with-timeout
	form when waiting for the transaction to complete.

2004-09-19  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el (ah-clearcase-fprop): 1.15 add a 'broken-view
	checkout type
	(ah-clearcase-fprop-broken-view-p): 1.15 the fprop struct hoolds
	the broken-view state internally, so just return that.
	(ah-clearcase-fprop-set-version): 1.15 don't update the checkout
	status or modeline when the file is hijacked or is in a broken
	view.
	(ah-clearcase-fprop-set-version-simple): 1.15 check for a broken
	view as well.
	(ah-clearcase-fprop): 1.16 checkout slot renamed to status
	(ah-clearcase-fprop-hijacked-p, ah-clearcase-fprop-checkedout-p,
	ah-clearcase-fprop-broken-view-p, ah-clearcase-fprop-set-version,
	ah-clearcase-fprop-set-version-simple, vc-clearcase-what-version):
	1.16 use ah-clearcase-fprop-status
	(ah-clearcase-vprop-get): 1.16 rewritten to accept a vprop, a
	fprop or a string as an argument, and find the correct vprop from
	any of these.
	(ah-clearcase-snapshot-view-p, ah-clearcase-dynamic-view-p): 1.16
	made it a defsubst, ah-clearcase-vprop-get is smarter now.
	(vc-clearcase-what-version): 1.16 added info about a broken view.

2004-09-17  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el (ah-cleartool-status-rx): 1.14 match only at the
	end of the string.
	(ah-cleartool-question-rx): 1.14 new regexp
	(ah-cleartool-tq-rx): 1.14 combines ah-cleartool-status-rx and
	ah-cleartool-question-rx, used by the transaction queue to
	determine the end of record from cleartool.
	(ah-cleartool-tq-handler): 1.14 try ah-cleartool-status-rx, than
	ah-cleartool-question-rx, and report an error if the latter
	matches.  Also removed the save-match-data form as Emacs already
	saves these.
	(ah-cleartool-ask): 1.14 use ah-cleartool-tq-rx as the end of
	record regexp.
	(ah-clearcase-fprop-broken-view-p): 1.14 new function
	(ah-clearcase-snapshot-view-p, ah-clearcase-dynamic-view-p): 1.14
	accept a fprop as argument in addition to a vprop or a view-tag
	name.
	(vc-clearcase-state): 1.14 don't run cleartool update if the view
	is broken, instead report an error.
	(vc-clearcase-dir-state): 1.14 use new semantics of
	ah-clearcase-snapshot-view-p

2004-09-16  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el (ah-cleartool-tq-handler): 1.13 use = instead of
	eq
	(ah-clearcase-fprop-set-version): 1.13 use null instead of eq
	(ah-clearcase-vprop-prepare): 1.13 use char-equal instead of eq
	(ah-clearcase-refresh-files-in-view): 1.13 renamed view to
	view-tag
	(vc-clearcase-create-snapshot): 1.13 use format to create the
	cleartool command, quote dir properly
	(vc-clearcase-list-checkouts): 1.13 use string= instead of equal
	(ah-clearcase-label-diff-report): 1.13 new function
	(vc-clearcase-edcs): 1.13 disable undo when inserting the
	configspec, re-enable it afterwards.
	(clearcase-global-menu): 1.13 add ah-clearcase-label-diff-report
	to the Clearcase menu.

2004-09-10  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el (ah-clearcase-fprop-initialized-p): 1.12 made it
	a defsubst
	(vc-clearcase-checkout): 1.12 if the checkout will create a
	branch, don't check if someone else has a reserved checkout on the
	version.
	(vc-clearcase-diff): 1.12 determine whether the diff is empty
	depends on the diff type: serial or diff

2004-09-05  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el (ah-cleartool-tq-maybe-start,
	ah-clearcase-fprop-file, ah-clearcase-fprop-hijacked-p,
	ah-clearcase-fprop-checkedout-p): 1.11 made them a defsubst

2004-09-03  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el (ah-clearcase-vtree-program): 1.10 new variable
	(vc-clearcase-create-snapshot): reuse BRANCHP to signify that the
	label should be moved.
	(vc-clearcase-gui-vtree-browser): 1.10 use
	ah-clearcase-vtree-program

2004-08-30  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el (ah-clearcase-declare-view,
	ah-clearcase-refresh-files-in-view): 1.9 use the same name in the
	body as in the parameter declaration (for some reason, the CVS
	Emacs byte compiler didn't pick this)

2004-08-29  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el (vc-clearcase-checkout): 1.8 use format to
	construct the checkout command

2004-08-24  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el: 1.7 commentary moved inside a fold, some
	functions moved around for better code structure
	(ah-clearcase-refresh-files-in-view): 1.7 renamed from
	ah-clearcase-after-setcs
	(edcs-mode): 1.7 defined as an alias for ah-clearcase-edcs-mode.
	(clearcase-global-menu): 1.7 Non file Clearcase commands go in
	here instead of the Version Control menu.

2004-08-22  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el: 1.6 TODO list update
	(ah-clearcase-wash-mode-line): 1.6 new function
	(ah-clearcase-fprop-set-version): 1.6 use
	ah-clearcase-wash-mode-line, don't add '.../' to the mode-line
	string
	(ah-clearcase-vprop-prepare): 1.6 rewritten
	(ah-clearcase-diff-format, ah-clearcase-diff-cleanup-flag): 1.6
	new variables
	(vc-clearcase-diff): 1.6 use ah-clearcase-diff-format and
	ah-clearcase-diff-cleanup-flag
	(vc-clearcase-what-version): 1.6 new function
	(ah-clearcase-view-tag-complete): 1.6 use compare-string instead
	of string= and substring
	(vc-clearcase-edcs): 1.6 don't remove the old view-tag list

2004-08-15  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el (with-checkedout-dir, with-comment-file): 1.5
	found out about ,@
	(ah-clearcase-edcs-mode): 1.5 add syntax codes for the comment
	character and setup comment-start & co

2004-08-14  Alexandru Harsanyi  <harsanyi@mac.com>

	* vc-clearcase.el: 1.3 all packages are required at runtime
	(ah-clearcase-fprop-initialized-p): 1.3 doc update
	(ah-clearcase-fprop-reset): 1.3 accepts a NIL fprop, doc update
	(ah-clearcase-fprop-set-version): 1.3 set version info for
	hijacked files as well but omit the checkout mode and mode line
	(ah-clearcase-fprop-set-version-simple): 1.3 set basic information
	even for hijacked files.
	(ah-clearcase-snapshot-view-p): 1.3 reorganized
	(ah-clearcase-dynamic-view-p): 1.3 new function
	(ah-clearcase-vprop-prepare, ah-clearcase-maybe-set-vc-state,
	vc-clearcase-registered, vc-clearcase-state,
	vc-clearcase-dir-state, vc-clearcase-responsible-p,
	vc-clearcase-checkin, ah-clearcase-revision-reserved-p,
	vc-clearcase-checkout, vc-clearcase-revert, vc-clearcase-merge,
	vc-clearcase-merge-news, vc-clearcase-diff): 1.3 the cleartool
	command is constructed using a format string.  Accepts filenames
	containing spaces.
	(ah-clearcase-vprop-prepare): 1.3 fix test for view type (snapshot
	or dynamic)
	(ah-clearcase-gensym-prefix): 1.3 new variable
	(with-checkedout-dir): 1.3 new macro
	(with-comment-file): 1.3 new macro
	(vc-clearcase-registered): 1.3 when the file is hijacked, ask
	cleartool for information using the version extended pathname.
	(vc-clearcase-register, vc-clearcase-rename-file): 1.3 use
	with-checkedout-dir
	(ah-clearcase-finish-checkout): 1.3 quote pname
	(vc-clearcase-rename-file): 1.3 use
	ah-clearcase-with-checked-out-dir
	(ah-clearcase-edcs-mode): 1.3 fix typo in name
	(vc-clearcase-edcs): 1.3 don't wait for the previous lsview
	transaction.
	(ah-clearcase-tmpdir): 1.3 new variable
	(vc-clearcase-checkin, ah-clearcase-finish-checkout,
	vc-clearcase-rename-file): 1.3 use with-comment-file


